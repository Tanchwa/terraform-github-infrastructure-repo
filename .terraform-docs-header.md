# Cloud Landingzone Github Repository

- [Purpose](#purpose) 
- [Details](#details)
- [Usage](#usage)
- [Gotchas](#gotchas)
- [Inputs](#inputs)
- [Outputs](#outputs)
- [Contributing](#contributing)



## Purpose 
Deploys an infrastructure github repository and the cloud infrastructure to support it. This is a 1 to 1 relationship, meaning that each repository will have its own set of cloud resources.
## Details 
The repository will be set up to use GitHub actions for deploying terraform infrastructure, and will include a basic workflow file. The upstream source of these can be found in the [infrastructure-deployment-template](https://github.com/Tanchwa/infrastructure-deployment-template) repository. In addition, this module will automatically create the necessary secrets and resources for OIDC connect for passwordless authentication to the cloud provider.
The module will create an authentication context specific to the cloud provider specified (usually a service principal/account) and will grant full read, write, and delete permissions to the resources within a specific context, such as an Account in AWS, Project in GCP, or Subscription in Azure. These resources were chosen due to their ability to be used to easily assign billing accounts, and to get out of the way of the user. A default resource "container" (Resource Group in Azure, Project/ VPC in GCP, or VPC in AWS) will also be created.
Finally, the module will also create a blob storage for the backend terraform state files. This will live in a "meta" context in the cloud provider, meaning that it will not be tied to a specific repository, but rather to the organization or account as a whole. The service context created will be able to create and read the files, but will not be able to delete the storage account or container.
## Usage 
These module should be consumed from a central repository used to manage the landingzone infrastructure. It is not intended to be used as a standalone module, but rather as part of a larger infrastructure deployment process. The central repository should include things like management groups, policies, and other resources that are necessary for the overall infrastructure management.
## Gotchas
### Auto-created Variable Naming
Variables related to the authentication of the cloud provider will be pre-pended with their ususal prefix for that context. For example, ARM_, AWS_, GOOGLE_. Any OTHER variables specific to the provider will NOT be pre-pended. Some examples of these variables are: PROJECT_ID (GCP) and RESOURCE_GROUP_NAME (Azure).
